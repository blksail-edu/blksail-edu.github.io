"use strict";(self.webpackChunkblksail_edu_github_io=self.webpackChunkblksail_edu_github_io||[]).push([[176],{4156:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/Topic-SinglePublisherandSingleSubscriber-ca635d618fb42a37dcd4aa9af929b670.gif"},7227:(e,n,s)=>{s.d(n,{A:()=>l});s(96540);var i=s(34164);const r={tabItem:"tabItem_Ymn6"};var t=s(74848);function l({children:e,hidden:n,className:s}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,i.A)(r.tabItem,s),hidden:n,children:e})}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var i=s(96540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}},44383:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/Service-SingleServiceClient-761326bd2253c69c489d2849a5a690c0.gif"},49489:(e,n,s)=>{s.d(n,{A:()=>w});var i=s(96540),r=s(34164),t=s(24245),l=s(56347),a=s(36494),o=s(62814),c=s(45167),d=s(69900);function h(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function u(e){const{values:n,children:s}=e;return(0,i.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:s,default:i}})=>({value:e,label:n,attributes:s,default:i}))}(s);return function(e){const n=(0,c.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,s])}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const s=(0,l.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,o.aZ)(r),(0,i.useCallback)(e=>{if(!r)return;const n=new URLSearchParams(s.location.search);n.set(r,e),s.replace({...s.location,search:n.toString()})},[r,s])]}function x(e){const{defaultValue:n,queryString:s=!1,groupId:r}=e,t=u(e),[l,o]=(0,i.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find(e=>e.default)??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:t})),[c,h]=m({queryString:s,groupId:r}),[x,j]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,r]=(0,d.Dv)(n);return[s,(0,i.useCallback)(e=>{n&&r.set(e)},[n,r])]}({groupId:r}),g=(()=>{const e=c??x;return p({value:e,tabValues:t})?e:null})();(0,a.A)(()=>{g&&o(g)},[g]);return{selectedValue:l,selectValue:(0,i.useCallback)(e=>{if(!p({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);o(e),h(e),j(e)},[h,j,t]),tabValues:t}}var j=s(11062);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=s(74848);function f({className:e,block:n,selectedValue:s,selectValue:i,tabValues:l}){const a=[],{blockElementScrollPositionUntilNextRender:o}=(0,t.a_)(),c=e=>{const n=e.currentTarget,r=a.indexOf(n),t=l[r].value;t!==s&&(o(n),i(t))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const s=a.indexOf(e.currentTarget)+1;n=a[s]??a[0];break}case"ArrowLeft":{const s=a.indexOf(e.currentTarget)-1;n=a[s]??a[a.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:l.map(({value:e,label:n,attributes:i})=>(0,b.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{a.push(e)},onKeyDown:d,onClick:c,...i,className:(0,r.A)("tabs__item",g.tabItem,i?.className,{"tabs__item--active":s===e}),children:n??e},e))})}function y({lazy:e,children:n,selectedValue:s}){const t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=t.find(e=>e.props.value===s);return e?(0,i.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:t.map((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==s}))})}function v(e){const n=x(e);return(0,b.jsxs)("div",{className:(0,r.A)("tabs-container",g.tabList),children:[(0,b.jsx)(f,{...n,...e}),(0,b.jsx)(y,{...n,...e})]})}function w(e){const n=(0,j.A)();return(0,b.jsx)(v,{...e,children:h(e.children)},String(n))}},54576:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/Nodes-TopicandService-70587b66cc1eed397634f7b90337db01.gif"},73331:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module/ros2_introduction","title":"2.1 Introduction","description":"Robot Operating System 2 (ROS 2) is a middleware with open-source libraries and tools to build and support robotics applications. The documentation can be found here.","source":"@site/docs/2-module/10_ros2_introduction.mdx","sourceDirName":"2-module","slug":"/module/ros2_introduction","permalink":"/docs/module/ros2_introduction","draft":false,"unlisted":false,"editUrl":"https://github.com/blksail-edu/blksail-edu.github.io/tree/main/docs/2-module/10_ros2_introduction.mdx","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"slidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Module 2 - ROS 2","permalink":"/docs/category/module-2---ros-2"},"next":{"title":"2.2 Virtual Environments","permalink":"/docs/module/ros2_in_venv"}}');var r=s(74848),t=s(28453);s(49489),s(7227);const l={slidebar_position:1},a="2.1 Introduction",o={},c=[{value:"Terminology",id:"terminology",level:2},{value:"Nodes",id:"nodes",level:3},{value:"Topics",id:"topics",level:3},{value:"Messages",id:"messages",level:3},{value:"Services",id:"services",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Environment Setup",id:"environment-setup",level:2},{value:"Source ROS 2 in <code>.zshrc</code> File",id:"source-ros-2-in-zshrc-file",level:3},{value:"Create a ROS 2 Workspace",id:"create-a-ros-2-workspace",level:3},{value:"Create a ROS 2 Package",id:"create-a-ros-2-package",level:3},{value:"Problem Set",id:"problem-set",level:2},{value:"Problem One",id:"problem-one",level:3},{value:"Problem Two",id:"problem-two",level:3},{value:"Problem Three",id:"problem-three",level:3},{value:"Problem Four",id:"problem-four",level:3},{value:"Problem Five",id:"problem-five",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"21-introduction",children:"2.1 Introduction"})}),"\n",(0,r.jsxs)(n.p,{children:["Robot Operating System 2 (ROS 2) is a middleware with open-source libraries and tools to build and support robotics applications. The documentation can be found ",(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/jazzy/index.html",children:"here"}),"."]}),"\n",(0,r.jsx)("iframe",{src:"https://blksail-edu.github.io/slides/2024_intro_to_ros",width:"100%",height:320,frameborder:"0",allowfullscreen:!0}),"\n",(0,r.jsx)(n.h2,{id:"terminology",children:"Terminology"}),"\n",(0,r.jsx)(n.p,{children:"The ROS 2 Graph describes the general terminology and structure of ROS 2 at the user-level. The ROS 2 graph consists of:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Nodes"}),"\n",(0,r.jsx)(n.li,{children:"Topics"}),"\n",(0,r.jsx)(n.li,{children:"Messages"}),"\n",(0,r.jsx)(n.li,{children:"Services"}),"\n",(0,r.jsx)(n.li,{children:"Parameters"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"nodes, topics, and services visual representation",src:s(54576).A+"",width:"854",height:"480"})}),"\n",(0,r.jsx)(n.h3,{id:"nodes",children:"Nodes"}),"\n",(0,r.jsx)(n.p,{children:"Nodes are instances of executables that act as individual computation entitites. They perform specific tasks, such as processing sensor data or controlling hardware. Nodes communicate with each other using publishers/subscribers, services, and actions."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Multiple nodes can publish to and subscribe to the same topics."})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"single publisher and single subscriber visual representation",src:s(4156).A+"",width:"854",height:"480"})}),"\n",(0,r.jsx)(n.h3,{id:"topics",children:"Topics"}),"\n",(0,r.jsx)(n.p,{children:"Topics are named buses that nodes use to exchange messages in publisher/subscriber pairs. Nodes talk to other nodes by publishing messages to topics. Nodes listen to other nodes by subscribing to those topics to receive the messages."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Each topic is limited to a single message type specified at the time when the topic is named. Multiple topics can have the same message type."})}),"\n",(0,r.jsx)(n.h3,{id:"messages",children:"Messages"}),"\n",(0,r.jsx)(n.p,{children:"Messages are data structures used to communicate information between nodes via topics. These structures contain combinations of fields and data types, and are defined in .msg files. The field is the name of specific data in the structure, while the data type is typically either a primitive data type or another message type. Messages define specific information such as sensor data or control input."}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.p,{children:["In the below example message file ",(0,r.jsx)(n.code,{children:"Vector3.msg"}),", there are three data fields ",(0,r.jsx)(n.code,{children:"x"}),", ",(0,r.jsx)(n.code,{children:"y"}),", and ",(0,r.jsx)(n.code,{children:"z"}),", each with a data type of ",(0,r.jsx)(n.code,{children:"float64"}),"."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-msg",children:"Vector3.msg\n\nfloat64 x\nfloat64 y\nfloat64 z\n"})}),(0,r.jsxs)(n.p,{children:["The data type can be any ",(0,r.jsx)(n.a,{href:"https://docs.ros.org/en/jazzy/Concepts/Basic/About-Interfaces.html",children:"primitive data type"}),", other message types, or arrays."]})]}),"\n",(0,r.jsx)(n.h3,{id:"services",children:"Services"}),"\n",(0,r.jsx)(n.p,{children:"Services are used by nodes to co communication method with a request-response mechanism. A client sends requests to a server and receives responses after the service is complete."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"single service client visual representation",src:s(44383).A+"",width:"854",height:"480"})}),"\n",(0,r.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsx)(n.p,{children:"Parmaeters are modifiable values assigned to individual or multiple nodes at runtime."}),"\n",(0,r.jsx)(n.h2,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,r.jsxs)(n.h3,{id:"source-ros-2-in-zshrc-file",children:["Source ROS 2 in ",(0,r.jsx)(n.code,{children:".zshrc"})," File"]}),"\n",(0,r.jsx)(n.p,{children:"For ROS 2 to be accessible in the terminal, the ROS 2 installation and all workspaces must be sourced. The installation contains all default packages and tools necessary to use ROS 2. Workspaces are locations that contain user-defined packages/code."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Configure the ",(0,r.jsx)(n.code,{children:".zshrc"})," file to source the ROS 2 installation.\nUsing your favorite text editor, add the following line to the bottom of ",(0,r.jsx)(n.code,{children:".zshrc"})," file on the ",(0,r.jsx)(n.code,{children:"backseat"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-zsh",children:"source /opt/ros/jazzy/setup.zsh\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["Source the ",(0,r.jsx)(n.code,{children:".zshrc"})," file again to apply the changes in the current terminal."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-zsh",children:"source ~/.zshrc\n"})}),"\n",(0,r.jsx)(n.h3,{id:"create-a-ros-2-workspace",children:"Create a ROS 2 Workspace"}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:["To create a workspace, start by making an empty directory named ",(0,r.jsx)(n.code,{children:"auvc_ws"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-zsh",children:"cd && mkdir auvc_ws\n"})}),"\n",(0,r.jsx)(n.p,{children:"Every workspace contains the following four directories:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"build"}),": files for compiling packages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"install"}),": compiled packages and executables"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"log"}),": compile history"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"src"}),": user-defined packages/code"]}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsxs)(n.li,{children:["Initialize the ",(0,r.jsx)(n.code,{children:"build"}),", ",(0,r.jsx)(n.code,{children:"install"}),", and ",(0,r.jsx)(n.code,{children:"log"})," directories by compiling the empty workspace. The ",(0,r.jsx)(n.code,{children:"src"})," directory is manually created in the next step."]}),"\n"]}),"\n",(0,r.jsxs)(n.admonition,{type:"warning",children:[(0,r.jsxs)(n.p,{children:["When you run ",(0,r.jsx)(n.code,{children:"colcon build"})," to compile packages in a workspace you MUST run the command in the workspace directory."]}),(0,r.jsxs)(n.p,{children:["BEFORE running the command, run ",(0,r.jsx)(n.code,{children:"pwd"})," to print the working directory and ensure that the path ends with ",(0,r.jsx)(n.code,{children:"auvc_ws"}),"."]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-zsh",children:"colcon build\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"5",children:["\n",(0,r.jsxs)(n.li,{children:["Configure the ",(0,r.jsx)(n.code,{children:".zshrc"})," file to source the installation and source the workspace.\nUsing your favorite text editor, add the following line:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-zsh",children:"source ~/auvc_ws/install/setup.zsh\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"6",children:["\n",(0,r.jsxs)(n.li,{children:["Lastly, create the ",(0,r.jsx)(n.code,{children:"src"})," directory."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-zsh",children:"mkdir src\n"})}),"\n",(0,r.jsx)(n.h3,{id:"create-a-ros-2-package",children:"Create a ROS 2 Package"}),"\n",(0,r.jsx)(n.p,{children:"Packages are structured directories where users write their nodes."}),"\n",(0,r.jsxs)(n.ol,{start:"7",children:["\n",(0,r.jsx)(n.li,{children:"Create a new package in your ROS 2 workspace."}),"\n"]}),"\n",(0,r.jsxs)(n.admonition,{type:"warning",children:[(0,r.jsxs)(n.p,{children:["When you create a package with ",(0,r.jsx)(n.code,{children:"ros pkg create"}),", you MUST run the command inside the ",(0,r.jsx)(n.code,{children:"src"})," directory within the workspace."]}),(0,r.jsxs)(n.p,{children:["BEFORE running the command, run ",(0,r.jsx)(n.code,{children:"pwd"})," to print the working directory and ensure the path ends with ",(0,r.jsx)(n.code,{children:"auvc_ws/src"}),"."]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-zsh",children:"ros2 pkg create tutorial --build-type ament_python\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In this case, ",(0,r.jsx)(n.code,{children:"tutorial"})," is the name of the package and ",(0,r.jsx)(n.code,{children:"--build-type ament_python"})," specifies the package is a python package."]}),"\n",(0,r.jsxs)(n.ol,{start:"8",children:["\n",(0,r.jsx)(n.li,{children:"Open the package in Visual Studio Code and inspect the structure."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-zsh",children:"code ~/auvc_ws/src/tutorial\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Within the ",(0,r.jsx)(n.code,{children:"tutorial"})," package, you will find a second, empty directory that is also named ",(0,r.jsx)(n.code,{children:"tutorial"}),". Each ROS 2 python package contains a subdirectory with the same name as the package. Python files (your ROS 2 nodes) go inside this subdirectory."]}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.p,{children:["For this example package, you will create any python files inside the ",(0,r.jsx)(n.code,{children:"tutorial"})," subdirectory."]}),(0,r.jsxs)(n.p,{children:["You can check whether you are in the right place by using ",(0,r.jsx)(n.code,{children:"pwd"})," to print the working directory and verifying that the path ends in ",(0,r.jsx)(n.code,{children:"auvc_ws/src/tutorial/tutorial"}),"."]}),(0,r.jsx)(n.p,{children:"Alternatively, if you were working in a package called <your_package_name>, the subdirectory would also be called <your_package_name>."})]}),"\n",(0,r.jsxs)(n.admonition,{type:"warning",children:[(0,r.jsx)(n.p,{children:"To ensure your package compiles correctly, there are two files that must be modified inside the package in addition to your python nodes:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"package.xml"}),": defines package dependencies"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setup.py"}),": define package compilation data"]}),"\n"]})]}),"\n",(0,r.jsx)(n.h2,{id:"problem-set",children:"Problem Set"}),"\n",(0,r.jsx)(n.h3,{id:"problem-one",children:"Problem One"}),"\n",(0,r.jsxs)(n.p,{children:["Create a node in your ",(0,r.jsx)(n.code,{children:"tutorial"})," package that publishes ",(0,r.jsx)(n.code,{children:"Vector3"})," messages to a topic named ",(0,r.jsx)(n.code,{children:"/tutorial"})," on a timed interval."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Create a new python file in the your ",(0,r.jsx)(n.code,{children:"tutorial"})," package named ",(0,r.jsx)(n.code,{children:"publisher.py"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"In the file, add the following imports:"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:"import rclpy    # the ROS 2 client library for Python\nfrom rclpy.node import Node    # the ROS 2 Node class\nfrom geometry_msgs.msg import Vector3    # the Vector3 message type definition\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Create a class for your node that inherits from the ROS 2 Node class."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"In the initializer method, add:"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'super().__init__("tutorial_publisher")    # names the node when running\n\nself.pub = self.create_publisher(\n    Vector3,        # the message type\n    "/tutorial",    # the topic name\n    10              # QOS (will be covered later)\n)\n\nself.timer = self.create_timer(\n    1.0,    # timer period (sec)\n    self.publish_vector3    # callback function\n)\n\nself.get_logger().info("initialized publisher node")\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["In this problem, the ",(0,r.jsx)(n.code,{children:"publish_vector3"})," method will be called by the timer every ",(0,r.jsx)(n.code,{children:"1.0"})," seconds."]})}),"\n",(0,r.jsxs)(n.ol,{start:"5",children:["\n",(0,r.jsxs)(n.li,{children:["Create a method ",(0,r.jsx)(n.code,{children:"publish_vector3"})," that publishes a ",(0,r.jsx)(n.code,{children:"Vector3"})," message when called. Replace the values with random values."]}),"\n"]}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsx)(n.p,{children:"An empty ROS 2 message is created using a variable of the message type:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:"msg = Vector3()\n"})}),(0,r.jsx)(n.p,{children:"The data fields of the message are accessed as follows:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:"msg.x = 0\nmsg.y = 0\nmsg.z = 0\n"})}),(0,r.jsx)(n.p,{children:"The message is published by the publisher using:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:"self.pub.publish(msg)\n"})})]}),"\n",(0,r.jsxs)(n.ol,{start:"6",children:["\n",(0,r.jsxs)(n.li,{children:["Add the ",(0,r.jsx)(n.code,{children:"main"})," function below the class definition."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'def main(args=None):\n    rclpy.init(args=args)\n    node = <YOUR_CLASS>()\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        print("\\nKeyboardInterrupt received, shutting down...")\n    finally:\n        node.destroy_node()\n        if rclpy.ok():\n            rclpy.shutdown()\n'})}),"\n",(0,r.jsx)(n.h3,{id:"problem-two",children:"Problem Two"}),"\n",(0,r.jsxs)(n.p,{children:["Create a node in your ",(0,r.jsx)(n.code,{children:"tutorial"})," package that subscribes to ",(0,r.jsx)(n.code,{children:"Vector3"})," messages on a topic named ",(0,r.jsx)(n.code,{children:"/tutorial"})," and logs them to the terminal."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Create a new python file in the your ",(0,r.jsx)(n.code,{children:"tutorial"})," package named ",(0,r.jsx)(n.code,{children:"subscriber.py"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"In the file, add the following imports:"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:"import rclpy    # the ROS 2 client library for Python\nfrom rclpy.node import Node    # the ROS 2 Node class\nfrom geometry_msgs.msg import Vector3    # the Vector3 message type definition\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Create a class for your node that inherits from the ROS 2 Node class."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"In the initializer method, add:"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'super().__init__("tutorial_subscriber")    # names the node when running\n\nself.sub = self.create_subscription(\n    Vector3,        # the message type\n    "/tutorial",    # the topic name,\n    self.log_vector3,  # the subscription\'s callback method\n    10              # QOS (will be covered later)\n)\n\nself.get_logger().info("initialized subscriber node")\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"Each time a subscription hears a message on a topic, that subscription calls a callback method."})}),"\n",(0,r.jsxs)(n.ol,{start:"5",children:["\n",(0,r.jsxs)(n.li,{children:["Create the subscription method ",(0,r.jsx)(n.code,{children:"log_vector3"}),". Calculate the magnitude of the Vector3 and log it in the terminal."]}),"\n"]}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsx)(n.p,{children:"The callback function should be defined as:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:"def log_vector3(self, msg):\n"})})]}),"\n",(0,r.jsxs)(n.ol,{start:"6",children:["\n",(0,r.jsxs)(n.li,{children:["Add the ",(0,r.jsx)(n.code,{children:"main"})," function below the class definition."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'def main(args=None):\n    rclpy.init(args=args)\n    node = <YOUR_CLASS>()\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        print("\\nKeyboardInterrupt received, shutting down...")\n    finally:\n        node.destroy_node()\n        if rclpy.ok():\n            rclpy.shutdown()\n'})}),"\n",(0,r.jsx)(n.h3,{id:"problem-three",children:"Problem Three"}),"\n",(0,r.jsxs)(n.p,{children:["Modify ",(0,r.jsx)(n.code,{children:"package.xml"})," so that the pile compiles correctly."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Below the license tag in ",(0,r.jsx)(n.code,{children:"package.xml"}),", add the following dependencies:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<depend>rclpy</depend>\n<depend>geometry_msgs</depend>\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Only ROS 2 specific dependencies are required. Python libraries like ",(0,r.jsx)(n.code,{children:"numpy"})," and ",(0,r.jsx)(n.code,{children:"random"})," do not need to be added."]})}),"\n",(0,r.jsx)(n.h3,{id:"problem-four",children:"Problem Four"}),"\n",(0,r.jsxs)(n.p,{children:["Modify ",(0,r.jsx)(n.code,{children:"setup.py"})," so that the pile compiles correctly."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["All nodes that should be compiled to executables must be specified in ",(0,r.jsx)(n.code,{children:"setup.py"})," as entry points. Replace the entry_points in your ",(0,r.jsx)(n.code,{children:"setup.py"})," with the following:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:"entry_points={\n    'console_scripts': [\n        'publisher = tutorial.publisher:main',\n        'subscriber = tutorial.subscriber:main',\n    ],\n},\n"})}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.p,{children:["Consider the first line in ",(0,r.jsx)(n.code,{children:"console_scripts"}),"."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:"'publisher = tutorial.publisher:main',\n"})}),(0,r.jsxs)(n.p,{children:["The first element, ",(0,r.jsx)(n.code,{children:"publisher"}),", is the name of the executable once compiled. Each executable must have a unique name within the package."]}),(0,r.jsxs)(n.p,{children:["The second element, ",(0,r.jsx)(n.code,{children:"tutorial.publisher:main"})," defines the path to the python file and the function to compile. In this case, ",(0,r.jsx)(n.code,{children:"tutorial"})," is the subdirectory within the package where the nodes are located, ",(0,r.jsx)(n.code,{children:"publisher"})," is the name of the python file, and ",(0,r.jsx)(n.code,{children:"main"})," is the name of the function to compile."]})]}),"\n",(0,r.jsx)(n.h3,{id:"problem-five",children:"Problem Five"}),"\n",(0,r.jsx)(n.p,{children:"Compile and test your nodes."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Compile the package."}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["Make sure you are compiling in the correct location. Running the ",(0,r.jsx)(n.code,{children:"colcon build"})," command in the wrong location will ",(0,r.jsx)(n.strong,{children:"mess up your workspace"}),"."]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-zsh",children:"colcon build --packages-select tutorial\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"--packages-select"})," flag allows you to select specific packages to compile."]})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["Open a new terminal on the ",(0,r.jsx)(n.code,{children:"backseat"})," and start an instance of the publisher node:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-zsh",children:"ros2 run tutorial publisher\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:["Open another new terminal on the ",(0,r.jsx)(n.code,{children:"backseat"})," and start an instance of the subscriber node:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-zsh",children:"ros2 run tutorial subscriber\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Check-off",type:"warning",children:(0,r.jsx)(n.p,{children:"Review with a TA or instructor to check-off this problem set."})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);