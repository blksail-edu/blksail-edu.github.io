"use strict";(self.webpackChunkblksail_edu_github_io=self.webpackChunkblksail_edu_github_io||[]).push([[511],{4137:(e,t,o)=>{o.d(t,{Zo:()=>h,kt:()=>m});var r=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var s=r.createContext({}),c=function(e){var t=r.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):l(l({},t),e)),o},h=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var o=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,h=a(e,["components","mdxType","originalType","parentName"]),u=c(o),p=n,m=u["".concat(s,".").concat(p)]||u[p]||d[p]||i;return o?r.createElement(m,l(l({ref:t},h),{},{components:o})):r.createElement(m,l({ref:t},h))}));function m(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=o.length,l=new Array(i);l[0]=p;var a={};for(var s in t)hasOwnProperty.call(t,s)&&(a[s]=t[s]);a.originalType=e,a[u]="string"==typeof e?e:n,l[1]=a;for(var c=2;c<i;c++)l[c]=o[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,o)}p.displayName="MDXCreateElement"},1172:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var r=o(7462),n=(o(7294),o(4137));const i={sidebar_position:1},l="Motor Control",a={unversionedId:"module/motor_commands",id:"module/motor_commands",title:"Motor Control",description:"Introduction",source:"@site/docs/2-module/motor_commands.mdx",sourceDirName:"2-module",slug:"/module/motor_commands",permalink:"/docs/module/motor_commands",draft:!1,editUrl:"https://github.com/blksail-edu/blksail-edu.github.io/tree/main/docs/2-module/motor_commands.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Module 2 - Controlling the Robot",permalink:"/docs/category/module-2---controlling-the-robot"},next:{title:"Troubleshooting",permalink:"/docs/category/troubleshooting"}},s={},c=[{value:"Introduction",id:"introduction",level:2},{value:"ESCs",id:"escs",level:2},{value:"Motors",id:"motors",level:2},{value:"Flight Controller",id:"flight-controller",level:2},{value:"Raspberry Pi",id:"raspberry-pi",level:2}],h={toc:c},u="wrapper";function d(e){let{components:t,...o}=e;return(0,n.kt)(u,(0,r.Z)({},h,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"motor-control"},"Motor Control"),(0,n.kt)("h2",{id:"introduction"},"Introduction"),(0,n.kt)("p",null,"The motors used in the robot are brushless DC motors.\nThese motors are controlled by a Electronic Speed Controller (ESC).\nThe ESCs are controlled by the flight controller, which in turn is controlled by the Raspberry Pi."),(0,n.kt)("mermaid",{value:"graph LR\n    RPI[Raspberry Pi] --\x3e FC[Flight Controller]\n    FC[Flight Controller] --\x3e E1[ESC 1]\n    FC --\x3e E2[ESC 2]\n    FC --\x3e E3[ESC 3]\n    FC --\x3e E4[ESC 4]\n    FC --\x3e E5[ESC 5]\n    FC --\x3e E6[ESC 6]\n    E1 --\x3e M1[Motor 1]\n    E2 --\x3e M2[Motor 2]\n    E3 --\x3e M3[Motor 3]\n    E4 --\x3e M4[Motor 4]\n    E5 --\x3e M5[Motor 5]\n    E6 --\x3e M6[Motor 6]"}),(0,n.kt)("h2",{id:"escs"},"ESCs"),(0,n.kt)("p",null,"The ESCs receive a Pulse Width Modulation (PWM) signal from the flight controller.\nThis is a signal that is sent at a fixed frequency, but the duty cycle of the signal is varied.\nThe duty cycle is the percentage of the time that the signal is high.\nThe ESCs use this signal to determine the speed of the motor.\nThis is common is RC applications, and is the same way that servos are controlled, see ",(0,n.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Servo_control"},"Servo Control - Wikipedia")),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://upload.wikimedia.org/wikipedia/commons/6/6c/Servomotor_Timing_Diagram.svg",alt:"PWM Signal"})),(0,n.kt)("p",null,"The ESCs are connected to the flight controller using a 3 pin connector.\nThe pins are labelled as follows:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"GND")," - Ground"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"5V")," - 5V power supply"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"S")," - Signal")),(0,n.kt)("h2",{id:"motors"},"Motors"),(0,n.kt)("p",null,"The motors are brushless DC motors.\nA brushless DC motor is a synchronous electric motor which is powered by direct-current electricity (DC) and which has an electronically controlled commutation system, instead of a mechanical commutation system based on brushes.\nIn such motors, current and torque, voltage and rpm are linearly related."),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://upload.wikimedia.org/wikipedia/commons/2/2e/Floppy_drive_spindle_motor_open.jpg",alt:"Brushless DC Motor"})),(0,n.kt)("p",null,"We can control the speed of the motor by varying the voltage applied to the motor.\nThe ESCs do this for us, and we can control the speed of the motor by varying the duty cycle of the PWM signal."),(0,n.kt)("h2",{id:"flight-controller"},"Flight Controller"),(0,n.kt)("p",null,"The flight controller is a device that is used to control the motors.\nIt is a microcontroller that is designed to be used in drones.\nIt has a number of sensors that are used to determine the orientation of the drone.\nIt then uses this information to control the motors."),(0,n.kt)("p",null,"The BlueROV2 uses a Pixhawk flight controller."),(0,n.kt)("p",null,"The flight controller is connected to the Raspberry Pi using a serial connection.\nThe Raspberry Pi sends commands to the flight controller, and the flight controller sends back information about the sensors.\nIt uses the ",(0,n.kt)("a",{parentName:"p",href:"https://mavlink.io/en/"},"MAVLink")," protocol to communicate with the Raspberry Pi."),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"In this section, we will use the flight controller to control the motors.\nWe will be ignoring the sensors on the flight controller, and will be using the Raspberry Pi to control the flight controller.")),(0,n.kt)("h2",{id:"raspberry-pi"},"Raspberry Pi"),(0,n.kt)("p",null,"The Raspberry Pi inside the BlueROV2 is used to control the flight controller.\nIt is running a program called ",(0,n.kt)("a",{parentName:"p",href:"https://www.ardusub.com/"},"ArduSub")," alongside a set of other programs as ",(0,n.kt)("a",{parentName:"p",href:"https://docs.bluerobotics.com/ardusub-zola/software/onboard/BlueOS-1.1/"},"BlueOS"),"\nArduSub is a program that is designed to control underwater vehicles.\nIt is based on the ",(0,n.kt)("a",{parentName:"p",href:"https://ardupilot.org/"},"ArduPilot")," project, which is a program that is designed to control aerial vehicles."),(0,n.kt)("p",null,"From your own RPi, you can control the motors by sending commands to the flight controller.\nYou can do this by sending MAVLink commands to the flight controller.\nWe will be using the python library ",(0,n.kt)("a",{parentName:"p",href:"https://www.ardusub.com/developers/pymavlink.html"},"pymavlink")," to do this."))}d.isMDXComponent=!0}}]);